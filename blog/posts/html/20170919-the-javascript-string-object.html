<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>

  <head>
    <link href="/blog/css/prism.css" rel="stylesheet" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="">
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500&amp;display=swap" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/aaaakshat/cm-web-fonts@latest/fonts.css">
    <style>
      html {
        color: #2a2f33;
        background-color: #f0f0f0;
        line-height: 1.5;
      }

      a {
        /*  padding-left:18px;*/
        padding: 0px;
        color: #6495ed;
        cursor: pointer;
        text-decoration: none;
        transition: all 0.2s ease-in-out;
      }

      a:hover,
      a:visited:hover {
        color: #b7410e;
        transition: all 0.4s ease-in-out;
      }

      a:visited {
        color: #6495ed;
      }

      .align_right:hover {
        text-align: right;

      }

      .stretch:hover {
        padding-left: calc(5vw - 40px);
        padding-right: calc(5vw - 40px);
        border-width: 5px;
        border-color: #2a2f33;
      }

      body {
        width: 60%;
        padding: 30px;
        padding-right: 0px;
        padding-top: 40px;
        padding-left: 40px;
        background-color: #f0f0f0;
        color: #2a2f33;
        font-family: "Computer Modern Serif", serif;
        font-size: 1.25em;
      }

      h1 {
        padding-bottom: 0px;
        margin-bottom: 0px;
      }

      .smol {
        font-size: 0.75em;
        font-family: "Source Code Pro", monospace !important;
        color: dimgrey;
      }

      a.foots {
        font-size: inherit;

      }

      a.foots:hover {
        color: #f0f0f0;
        background-color: #2a2f33;
        border-radius: 5px;
        padding: 5px;
        transition: all 0.4s ease-in-out;
      }
    </style>
  </head>

  <body>
    <p><em>Edit: The post below describes a primitive wrapper, <a
          href="https://eslint.org/docs/rules/no-new-wrappers">which do not act
          like primitives and will always resolve to true</a>. Please use with
        caution!</em></p>
    <p>In the previous post, I mentioned that I am using Bash far less
      frequently as my work generally involves fewer server-related tasks and
      more business process type workflows. This generally means that my
      Javascript (by way of Google Apps Script) abilities have moved from “How
      do I do this?” to “How do I do this better!” In the past this led me to
      fleshing out the nuances of command line scripting (<a
        href="/blog/posts/20161119-read-a-file-without-cat.html">e.g. my post
        about reading files without <code>cat</code></a>), but JavaScript offers
      much deeper depths to plumb, many of which I have only discovered in
      passing.</p>
    <p>One particular aspect of JavaScript objects has always bothered me:
      how do I use an object in a way that allows me to return a default value
      while still allowing access to properties contained within. Until today,
      I had assumed this wasn’t possible, and I was trying to bring too much
      of my Bash-oriented brain to this relatively new-to-me langauge.
      However, looking through <a
        href="https://stackoverflow.com/questions/5539047/javascript-why-cant-i-add-new-attributes-to-a-string-object">Stackoverflow</a>
      I discovered a method that met my perhaps non-standard needs.
    <pre><code class="language-javascript">
    /*
    Add object methods/values to a string while retaining the original value
    from Stack Overflow: https://unforswearing.com/shorten/?KRn
    */
    
    function addPropertiesToString() {
    var str = 'hello';
    
    // create string object
    str = new String(str);
    
    // add object properties
    // repeat() is available per MDN, but not Google Apps Script
    // see MDN: https://unforswearing.com/shorten/?ywk
    
    str.repeat = function(x) {
      var r = '';
      for (var q = 0; q < x; q++) { r=r + str; } return r; }; 
        // prepend text to str str.prepend=function(text) { 
        var wpre=text + str; return wpre; } // a different hello str.alternate='howdy' ; 
        
        // Logs for the methods above:
        Logger.log(str.repeat(3)); 
        // [17-09-19 17:34:46:698 EDT] hellohellohello 
        Logger.log(str.prepend('someone said: '));      
        // [17-09-19 17:34:46:699 EDT] someone said: hello

        Logger.log(str.alternate);
        // [17-09-19 17:34:46:699 EDT] howdy
      
        // And accessing the original str value
        Logger.log(str);

        // [17-09-19 17:34:46:700 EDT] hello     
    }
    </code></pre>
    </div>
    <p>In the above example, logging <code>htmlMessage</code> by itself
      would return the original string, which could be used elsewhere in the
      script (as part of a generated PDF, for example).</p>
    <p>While this doesn’t save much time or increase productivity, it does
      keep the email scoped to the <code>htmlMessage</code> and with a few
      additional lines of code, an <code>emailHtmlMessage</code> class could
      be created to generate this type of object on the fly.</p>
    <p>This was a fun exercise and my first real foray into deeper
      JavaScript methods/practices. Get in touch if you have any comments or
      suggestions!</p>
    <script src="/blog/js/prism.js"></script>
  </body>

</html>